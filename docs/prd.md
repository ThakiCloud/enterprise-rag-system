# Enterprise RAG System β€“ Product Requirements Document (PRD)

## 1. κ°μ”

μ—”ν„°ν”„λΌμ΄μ¦ ν™κ²½μ—μ„ λ€κ·λ¨ λ¬Έμ„Β·μ§€μ‹ κ΄€λ¦¬μ™€ κ³ κΈ‰ μ¶”λ΅ μ„ λ™μ‹μ— μ κ³µν•λ” **RAG (Retrievalβ€‘Augmented Generation) μ‹μ¤ν…**μ…λ‹λ‹¤. λ‹¤μ–‘ν• ν•μ‹μ λ¬Έμ„λ¥Ό λΉ λ¥΄κ² λ²΅ν„°ν™”ν•μ—¬ ν•μ΄λΈλ¦¬λ“ κ²€μƒ‰κ³Ό μ²΄μΈβ€‘μ¤λΈβ€‘λµν‚Ή(Chainβ€‘ofβ€‘Thought) κΈ°λ° λ¶„μ„μ„ μ§€μ›ν•κ³ , μ›Ή UIμ™€ REST APIλ¥Ό ν†µν•΄ μ†μ‰½κ² ν™μ©ν•  μ μλ„λ΅ μ„¤κ³„λμ—μµλ‹λ‹¤.

**μ£Όμ” νΉμ§•:**
- **λ‹¤μ¤‘ LLM ν”„λ΅λ°”μ΄λ” μ§€μ›**: OpenAI, Anthropic (Claude), Google (Gemini), Ollama, LM Studio, vLLM λ“±
- **ν•μ΄λΈλ¦¬λ“ κ²€μƒ‰**: LanceDB κΈ°λ° λ²΅ν„° κ²€μƒ‰ + BM25 ν‚¤μ›λ“ κ²€μƒ‰
- **λ‹¤μ¤‘ μ—μ΄μ „νΈ μ‹μ¤ν…**: RAG, μ¶”λ΅ , μ—°κµ¬ν€ μ—μ΄μ „νΈ ν‘μ—…
- **μ΄μ¤‘ UI μ κ³µ**: AGUIApp κΈ°λ° κ²½λ‰ UI + λ‚΄μ¥ μ›Ή λ€μ‹λ³΄λ“
- **CLI μΈν„°νμ΄μ¤**: κ°λ°μ μΉν™”μ  λ…λ Ήμ¤„ λ„κµ¬

---

## 2. λ©ν‘

1. **90% μ΄μƒμ λ‹µλ³€ μ •ν™•λ„** λ‹¬μ„± (μ‚¬λ‚΄ νμΌ κΈ°λ° μ§λ¬Έ κΈ°μ¤€)
2. **μ‹¤μ‹κ°„ μ¤νΈλ¦¬λ° μ‘λ‹µ** (p95 < 2s) μ κ³µ
3. **10λ§ λ¬Έμ„** κ·λ¨κΉμ§€ λ¬΄μ¤‘λ‹¨ μ¤μΌ€μΌβ€‘μ—…
4. μΌλ° μ‚¬μ©μκ°€ **5λ¶„ λ‚΄ μ¨λ³΄λ”©**β€”λ¬Έμ„ μ—…λ΅λ“ ν›„ μ¦‰μ‹ μ§λ¬Έ κ°€λ¥
5. **λ‹¤μ–‘ν• LLM ν”„λ΅λ°”μ΄λ”** μ μ—°ν• μ„ νƒ λ° μ „ν™ κ°€λ¥
6. **κ°λ°μ κ²½ν— μµμ ν™”** - CLIμ™€ μ›Ή μΈν„°νμ΄μ¤ λ™μ‹ μ κ³µ

---

## 3. μ£Όμ” κΈ°λ¥

| #    | μΉ΄ν…κ³ λ¦¬       | κΈ°λ¥               | μƒμ„Έ                                         | κµ¬ν„ μƒνƒ |
| ---- | ---------- | ---------------- | ------------------------------------------ | ------- |
| 3.1  | **λ©”λ¨λ¦¬**    | μ„Έμ… κ΄€λ¦¬            | SQLite + ORM, μ‘λ‹µ 10κ° μ μ§€                    | β… μ™„λ£   |
| 3.2  |            | μ»¨ν…μ¤νΈ λ³΄μ΅΄          | Session ID κΈ°λ° νμ¤ν† λ¦¬ μ£Όμ…                      | β… μ™„λ£   |
| 3.3  |            | μ„Έμ… CRUD API     | μ„Έμ… μƒμ„±/μ΅°ν/μ‚­μ /λ©λ΅ API                        | β… μ™„λ£   |
| 3.4  | **RAG**    | λ¬Έμ„ μ—…λ΅λ“           | PDF Β· DOCX Β· TXT λ‹¤μ¤‘ μ—…λ΅λ“ μ§€μ›                 | β… μ™„λ£   |
| 3.5  |            | URL ν¬λ΅¤λ§          | URL μ…λ ¥ β†’ μλ™ μ¤ν¬λ μ΄ν•‘ & λ²΅ν„°ν™”                    | β… μ™„λ£   |
| 3.6  |            | ν•μ΄λΈλ¦¬λ“ κ²€μƒ‰         | LanceDB (SearchType.hybrid) + BM25 λ³΄κ°•      | β… μ™„λ£   |
| 3.7  |            | νμΌ κ²€μ¦ λ° μ ν•       | νμΌ ν¬κΈ°/νƒ€μ… κ²€μ¦, 10MB μ ν•                      | β… μ™„λ£   |
| 3.8  | **μ¶”λ΅ **     | κΈ°λ³Έ RAG μ—μ΄μ „νΈ      | λ‹¤μ¤‘ LLM + KnowledgeTools                    | β… μ™„λ£   |
| 3.9  |            | κ³ κΈ‰ μ¶”λ΅  μ—μ΄μ „νΈ       | ReasoningTools Β· ThinkingTools ν†µν•© (CoT ν™μ„±) | β… μ™„λ£   |
| 3.10 |            | Research Team    | rag\_agent β†” reasoning\_agent ν‘μ—… λ¨λ“        | β… μ™„λ£   |
| 3.11 |            | μ¶”λ΅  λ‹¨κ³„ μ¶”μ          | μƒμ„Έν• μ¶”λ΅  κ³Όμ • λ΅κΉ… λ° λ°ν™                         | β… μ™„λ£   |
| 3.12 | **UI**     | AGUIApp κΈ°λ° κ²½λ‰ UI | μ‹¤μ‹κ°„ λ€ν™”, μ„Έμ… κ΄€λ¦¬, λ¬Έμ„ μ—…λ΅λ“                     | β… μ™„λ£   |
| 3.13 |            | λ‚΄μ¥ μ›Ή λ€μ‹λ³΄λ“        | λ¨λ λ°μ‘ν• μ›Ή μΈν„°νμ΄μ¤ (ν¬νΈ 8000)                  | β… μ™„λ£   |
| 3.14 |            | CLI μΈν„°νμ΄μ¤        | κ°λ°μμ© λ€ν™”ν• λ…λ Ήμ¤„ λ„κµ¬                           | β… μ™„λ£   |
| 3.15 |            | λ°±μ—”λ“ μ—°λ™           | FastAPI λ°±μ—”λ“μ™€ HTTP ν†µμ‹                        | β… μ™„λ£   |
| 3.16 | **API**    | REST μ—”λ“ν¬μΈνΈ       | FastAPI + OpenAPI 3.1 μλ™ λ¬Έμ„ν™”               | β… μ™„λ£   |
| 3.17 |            | λ‹¤μ¤‘ LLM μ§€μ›        | 6κ° ν”„λ΅λ°”μ΄λ” λ™μ  μ„ νƒ (ν™κ²½λ³€μ κΈ°λ°)                  | β… μ™„λ£   |
| 3.18 |            | ν–¥μƒλ μ—λ¬ μ²λ¦¬        | μƒμ„Έν• μμ™Έ μ²λ¦¬ λ° μ‚¬μ©μ μΉν™”μ  λ©”μ‹μ§€                   | β… μ™„λ£   |
| 3.19 |            | μ§€μ‹λ² μ΄μ¤ ν†µκ³„ API    | λ¬Έμ„ μ, λ²΅ν„° DB μƒνƒ μ΅°ν                         | β… μ™„λ£   |
| 3.20 | **μ—”ν„°ν”„λΌμ΄μ¦** | ν—¬μ¤μ²΄ν¬             | /health μ—”λ“ν¬μΈνΈ                              | β… μ™„λ£   |
| 3.21 |            | ν™κ²½ κ²€μ¦            | ν¨ν‚¤μ§€/ν™κ²½λ³€μ μ‚¬μ „ μ²΄ν¬                            | β… μ™„λ£   |
| 3.22 |            | λ΅κΉ… μ‹μ¤ν…           | κµ¬μ΅°ν™”λ λ΅κΉ… λ° λ””λ²„κΉ… μ§€μ›                          | β… μ™„λ£   |
| 3.23 |            | νμΌ μ •λ¦¬            | μλ™ μ„μ‹ νμΌ μ •λ¦¬ κΈ°λ¥                            | β… μ™„λ£   |
| 3.24 |            | μ»¨ν…μ΄λ„ν™”            | Docker + Docker Compose                    | β… μ™„λ£   |
| 3.25 |            | Kubernetes λ°°ν¬    | K8s λ§¤λ‹νμ¤νΈ, λ¦¬μ†μ¤ κ΄€λ¦¬, ν—¬μ¤μ²΄ν¬                   | β… μ™„λ£   |

---

## 4. μ•„ν‚¤ν…μ² κ°μ”

```mermaid
flowchart TB
    subgraph Client["ν΄λΌμ΄μ–ΈνΈ λ μ΄μ–΄"]
        A[AGUIApp UI<br/>Port: 8501]
        B[μ›Ή λ€μ‹λ³΄λ“<br/>Port: 8000]
        C[CLI μΈν„°νμ΄μ¤]
        D[REST API ν΄λΌμ΄μ–ΈνΈ]
    end
    
    subgraph Backend["λ°±μ—”λ“ μ„λΉ„μ¤ (FastAPI)"]
        E[API Router<br/>Port: 8000]
        F[Agent Factory]
        G[RAG Agent]
        H[Reasoning Agent]
        I[Research Team]
        J[Knowledge Manager]
        K[Session Manager]
        L[CLI Handler]
    end
    
    subgraph Storage["μ¤ν† λ¦¬μ§€ λ μ΄μ–΄"]
        M[(LanceDB<br/>Vector Store)]
        N[(SQLite<br/>Session Store)]
        O[File Storage<br/>PDF/DOCX/TXT]
    end
    
    subgraph LLM["LLM ν”„λ΅λ°”μ΄λ”"]
        P[OpenAI GPT-4o]
        Q[Anthropic Claude]
        R[Google Gemini]
        S[Ollama]
        T[LM Studio]
        U[vLLM/Custom]
    end

    A --> E
    B --> E
    C --> L
    D --> E
    E --> F
    F --> G
    F --> H
    F --> I
    G --> J
    H --> J
    I --> J
    J --> M
    G --> N
    H --> N
    I --> N
    J --> O
    K --> N
    L --> G
    L --> H
    L --> I
    
    G -.-> P
    G -.-> Q
    G -.-> R
    G -.-> S
    G -.-> T
    G -.-> U
```

---

## 5. κΈ°μ  μ¤νƒ

| λ μ΄μ–΄         | κΈ°μ                       | λ²„μ „/μƒμ„Έ                     | μ„ νƒ μ΄μ                         |
| ----------- | ----------------------- | ------------------------- | ---------------------------- |
| **μ–Έμ–΄**      | Python                  | 3.11+                     | ML μƒνƒκ³„ ν’λ¶€, FastAPI νΈν™       |
| **μ›Ή ν”„λ μ„μ›ν¬** | FastAPI                 | 0.115+                    | νƒ€μ… ννΈ, ASGI, μλ™ λ¬Έμ„ν™”         |
| **UI ν”„λ μ„μ›ν¬** | AGUIApp + λ‚΄μ¥ μ›Ή λ€μ‹λ³΄λ“     | agno ν¨ν‚¤μ§€ + HTML/CSS/JS    | μ΄μ¤‘ μΈν„°νμ΄μ¤λ΅ λ‹¤μ–‘ν• μ‚¬μ©μ μ§€μ›       |
| **CLI λ„κµ¬**   | μ»¤μ¤ν…€ CLI ν΄λμ¤            | Python argparse κΈ°λ°        | κ°λ°μ μΉν™”μ  λ…λ Ήμ¤„ μΈν„°νμ΄μ¤          |
| **λ²΅ν„° DB**   | LanceDB                 | 0.23+                     | μ¨β€‘ν”„λ λ―Έμ¤ κ°€λ¥, ν•μ΄λΈλ¦¬λ“ κ²€μƒ‰ μ§€μ›      |
| **μ„Έμ… DB**   | SQLite                  | λ‚΄μ¥                        | κ²½λ‰, νμΌ κΈ°λ°, ORM μ§€μ›           |
| **LLM API** | **λ‹¤μ¤‘ ν”„λ΅λ°”μ΄λ”**           |                           |                              |
|             | β”β”€ OpenAI               | GPT-4o                    | λ†’μ€ μ„±λ¥, λ‚®μ€ Latency            |
|             | β”β”€ Anthropic            | Claude-3-Opus             | κΈ΄ μ»¨ν…μ¤νΈ, μ¶”λ΅  λ¥λ ¥               |
|             | β”β”€ Google               | Gemini-1.5-Pro-Latest   | λ©€ν‹°λ¨λ‹¬, μ½”λ“ μƒμ„±                 |
|             | β”β”€ Ollama               | Llama3, Mistral, CodeLlama | λ΅μ»¬ μ‹¤ν–‰, λΉ„μ© μ κ°                |
|             | β”β”€ LM Studio            | μ‚¬μ©μ μ„ νƒ λ¨λΈ              | μ™„μ „ μ¨β€‘ν”„λ λ―Έμ¤          |
|             | β””β”€ vLLM/Custom          | μ‚¬μ©μ μ •μ                    | μ μ—°ν• λ°°ν¬ μµμ…                   |
| **λ¬Έμ„ μ²λ¦¬**   | pypdf, python-docx      | Latest                    | λ‹¤μ–‘ν• λ¬Έμ„ ν•μ‹ μ§€μ›               |
| **μ›Ή ν¬λ΅¤λ§**   | BeautifulSoup4          | Latest                    | URL μ½ν…μΈ  μ¶”μ¶                  |
| **λ΅κΉ…**      | Python logging         | λ‚΄μ¥                        | κµ¬μ΅°ν™”λ λ΅κΉ… λ° λ””λ²„κΉ…             |
| **κ²€μ¦**      | Pydantic                | 2.11+                     | λ°μ΄ν„° κ²€μ¦ λ° νƒ€μ… μ•μ „μ„±           |
| **μ»¨ν…μ΄λ„**    | Docker                  | Latest                    | μΌκ΄€λ λ°°ν¬ ν™κ²½                   |
| **μ¤μΌ€μ¤νΈλ μ΄μ…** | Kubernetes              | 1.25+                     | ν”„λ΅λ•μ… μ¤μΌ€μΌλ§                   |
| **IaC**     | Terraform               | Latest                    | μΈν”„λΌ μ½”λ“ν™”                     |

---

## 6. ν”„λ΅μ νΈ κµ¬μ΅° (ν„μ¬ κµ¬ν„)

```text
enterprise-rag-system/
β”β”€β”€ backend/                  # FastAPI λ°±μ—”λ“ (RAG ν•µμ‹¬)
β”‚   β”β”€β”€ app/
β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β”β”€β”€ main.py           # ASGI μ§„μ…μ  + μ›Ή λ€μ‹λ³΄λ“
β”‚   β”‚   β”β”€β”€ cli.py            # CLI μΈν„°νμ΄μ¤ ν΄λμ¤
β”‚   β”‚   β”β”€β”€ api/
β”‚   β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β”‚   β””β”€β”€ router.py     # ν™•μ¥λ API μ—”λ“ν¬μΈνΈ
β”‚   β”‚   β”β”€β”€ agents/
β”‚   β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β”‚   β””β”€β”€ factory.py    # λ‹¤μ¤‘ LLM μ—μ΄μ „νΈ ν©ν† λ¦¬
β”‚   β”‚   β”β”€β”€ core/
β”‚   β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β”‚   β”β”€β”€ config.py     # 6κ° LLM ν”„λ΅λ°”μ΄λ” μ„¤μ •
β”‚   β”‚   β”‚   β””β”€β”€ dependencies.py # FastAPI μμ΅΄μ„± μ£Όμ…
β”‚   β”‚   β”β”€β”€ knowledge/
β”‚   β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β”‚   β””β”€β”€ manager.py    # ν–¥μƒλ λ¬Έμ„ μ²λ¦¬ (λ΅κΉ…, κ²€μ¦)
β”‚   β”‚   β””β”€β”€ schemas/
β”‚   β”‚       β”β”€β”€ __init__.py
β”‚   β”‚       β”β”€β”€ document.py   # λ¬Έμ„ μ¤ν‚¤λ§
β”‚   β”‚       β”β”€β”€ query.py      # μΏΌλ¦¬ μ¤ν‚¤λ§
β”‚   β”‚       β””β”€β”€ session.py    # μ„Έμ… μ¤ν‚¤λ§ (CRUD μ§€μ›)
β”‚   β”β”€β”€ requirements.txt      # ν™•μ¥λ λ°±μ—”λ“ μμ΅΄μ„±
β”‚   β””β”€β”€ Dockerfile           # λ°±μ—”λ“ μ»¨ν…μ΄λ„
β”‚
β”β”€β”€ ui/                       # AGUIApp κΈ°λ° UI
β”‚   β”β”€β”€ __init__.py
β”‚   β”β”€β”€ main.py              # AGUIApp μ§„μ…μ  + λ°±μ—”λ“ μ—°λ™
β”‚   β”β”€β”€ config.py            # UI ν™κ²½ λ³€μ
β”‚   β”β”€β”€ requirements.txt     # UI μμ΅΄μ„±
β”‚   β””β”€β”€ Dockerfile          # UI μ»¨ν…μ΄λ„
β”‚
β”β”€β”€ infrastructure/          # λ°°ν¬ μΈν”„λΌ
β”‚   β”β”€β”€ docker-compose.yml  # λ΅μ»¬ ν†µν•© μ‹¤ν–‰
β”‚   β”β”€β”€ k8s/
β”‚   β”‚   β”β”€β”€ deployment.yaml # K8s λ°°ν¬ λ§¤λ‹νμ¤νΈ
β”‚   β”‚   β””β”€β”€ service.yaml    # K8s μ„λΉ„μ¤ μ„¤μ •
β”‚   β””β”€β”€ terraform/
β”‚       β”β”€β”€ main.tf         # AWS μΈν”„λΌ μ •μ
β”‚       β””β”€β”€ variables.tf    # Terraform λ³€μ
β”‚
β”β”€β”€ tests/                   # pytest κΈ°λ° ν…μ¤νΈ
β”‚   β”β”€β”€ backend/
β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β””β”€β”€ test_main.py    # λ°±μ—”λ“ λ‹¨μ„ ν…μ¤νΈ
β”‚   β”β”€β”€ ui/
β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β””β”€β”€ test_ui.py      # UI ν…μ¤νΈ
β”‚   β””β”€β”€ requirements.txt    # ν…μ¤νΈ μμ΅΄μ„±
β”‚
β”β”€β”€ docs/                    # λ¬Έμ„
β”‚   β”β”€β”€ architecture.md     # μ•„ν‚¤ν…μ² λ¬Έμ„
β”‚   β””β”€β”€ prd.md             # λ³Έ PRD λ¬Έμ„
β”‚
β”β”€β”€ .github/                # CI/CD μ›ν¬ν”λ΅
β”‚   β””β”€β”€ workflows/
β”‚       β”β”€β”€ ci-backend.yml  # λ°±μ—”λ“ CI
β”‚       β”β”€β”€ ci-ui.yml       # UI CI
β”‚       β””β”€β”€ cd.yml          # λ°°ν¬ CD
β”‚
β”β”€β”€ config.env.example      # ν™κ²½ μ„¤μ • μμ‹
β”β”€β”€ run_backend.py          # ν–¥μƒλ λ°±μ—”λ“ μ‹¤ν–‰ μ¤ν¬λ¦½νΈ
β”β”€β”€ run_ui.py              # UI μ‹¤ν–‰ μ¤ν¬λ¦½νΈ
β”β”€β”€ init-cursor.sh         # κ°λ° ν™κ²½ μ΄κΈ°ν™”
β”β”€β”€ .gitignore
β”β”€β”€ LICENSE
β””β”€β”€ README.md
```

---

## 7. LLM ν”„λ΅λ°”μ΄λ” μ§€μ›

### 7.1 μ§€μ›λλ” ν”„λ΅λ°”μ΄λ”

| ν”„λ΅λ°”μ΄λ”      | λ¨λΈ μμ‹                    | μ©λ„                  | μ„¤μ • λ°©λ²•              |
| ---------- | ------------------------ | ------------------- | ------------------ |
| **OpenAI** | GPT-4o, GPT-3.5-turbo   | λ²”μ©, λ†’μ€ μ„±λ¥          | API ν‚¤ + λ¨λΈλ…         |
| **Anthropic** | Claude-3-Opus, Claude-3-Sonnet | κΈ΄ μ»¨ν…μ¤νΈ, μ¶”λ΅         | API ν‚¤ + λ¨λΈλ…         |
| **Google** | Gemini-1.5-Pro-Latest   | λ©€ν‹°λ¨λ‹¬, μ½”λ“ μƒμ„±        | API ν‚¤ + λ¨λΈλ…         |
| **Ollama** | Llama3, Mistral, CodeLlama | λ΅μ»¬ μ‹¤ν–‰, λΉ„μ© μ κ°       | λ΅μ»¬ URL + λ¨λΈλ…       |
| **LM Studio** | μ‚¬μ©μ μ„ νƒ λ¨λΈ              | μ™„μ „ μ¨β€‘ν”„λ λ―Έμ¤          | λ΅μ»¬ URL (ν¬νΈ 1234)   |
| **vLLM/Custom** | μ‚¬μ©μ μ •μ                 | μ μ—°ν• λ°°ν¬ μµμ…          | μ»¤μ¤ν…€ URL + λ¨λΈλ… + ν‚¤ |

### 7.2 λ™μ  ν”„λ΅λ°”μ΄λ” μ„ νƒ

```bash
# ν™κ²½ λ³€μλ΅ ν”„λ΅λ°”μ΄λ” μ„ νƒ
export MODEL_PROVIDER=anthropic
export ANTHROPIC_API_KEY=sk-ant-...
export ANTHROPIC_MODEL_NAME=claude-3-opus-20240229

# λλ” OpenAI
export MODEL_PROVIDER=openai
export OPENAI_API_KEY=sk-...
export OPENAI_MODEL_NAME=gpt-4o
```

---

## 8. μ‚¬μ©μ μΈν„°νμ΄μ¤

### 8.1 μ›Ή λ€μ‹λ³΄λ“ (λ‚΄μ¥)
- **μ ‘μ†**: `http://localhost:8000/`
- **νΉμ§•**: 
  - λ¨λ λ°μ‘ν• λ””μμΈ
  - μ‹¤μ‹κ°„ λ¬Έμ„ μ—…λ΅λ“
  - URL μ½ν…μΈ  μ¶”κ°€
  - κ³ κΈ‰ μ¶”λ΅  λ¨λ“ ν† κΈ€
  - μ„Έμ… κ΄€λ¦¬
- **λ€μƒ**: μΌλ° μ‚¬μ©μ, λΉ„κ°λ°μ

### 8.2 AGUIApp UI
- **μ ‘μ†**: `http://localhost:8501/`
- **νΉμ§•**:
  - κ²½λ‰ λ€ν™”ν• μΈν„°νμ΄μ¤
  - λ°±μ—”λ“ API μ—°λ™
  - μ„Έμ… κΈ°λ° λ€ν™”
- **λ€μƒ**: λΉ λ¥Έ ν”„λ΅ν† νƒ€μ΄ν•‘, κ°„λ‹¨ν• μ‚¬μ©

### 8.3 CLI μΈν„°νμ΄μ¤
- **μ‹¤ν–‰**: `python run_backend.py --cli`
- **νΉμ§•**:
  - λ€ν™”ν• λ…λ Ήμ¤„ λ„κµ¬
  - κ°λ°μ μΉν™”μ  λ…λ Ήμ–΄
  - μ‹¤μ‹κ°„ μ¶”λ΅  λ¨λ“ μ „ν™
  - μ„Έμ… μ •λ³΄ μ΅°ν
- **λ€μƒ**: κ°λ°μ, μ‹μ¤ν… κ΄€λ¦¬μ

### 8.4 CLI λ…λ Ήμ–΄

```bash
# CLI λ¨λ“ μ‹¤ν–‰
python run_backend.py --cli

# CLI λ‚΄λ¶€ λ…λ Ήμ–΄
/help          # λ„μ›€λ§ ν‘μ‹
/info          # μ§€μ‹λ² μ΄μ¤ μ •λ³΄
/url <URL>     # URL μ½ν…μΈ  μ¶”κ°€
/reasoning     # κ³ κΈ‰ μ¶”λ΅  λ¨λ“ ν† κΈ€
/session       # μ„Έμ… μ •λ³΄ ν‘μ‹
/cleanup       # μ„μ‹ νμΌ μ •λ¦¬
/quit          # μΆ…λ£
```

---

## 9. λ°°ν¬ μµμ…

### 9.1 λ΅μ»¬ κ°λ°
```bash
# 1. Python μ§μ ‘ μ‹¤ν–‰
python run_backend.py                    # μ„λ²„ λ¨λ“ (κΈ°λ³Έ)
python run_backend.py --cli              # CLI λ¨λ“
python run_backend.py --check            # ν™κ²½ κ²€μ¦
python run_ui.py                         # AGUIApp UI

# 2. Docker Compose
docker-compose up --build
```

### 9.2 μ‹¤ν–‰ μµμ…
```bash
# μ„λ²„ λ¨λ“ μµμ…
python run_backend.py --host 0.0.0.0 --port 8080  # μ»¤μ¤ν…€ νΈμ¤νΈ/ν¬νΈ
python run_backend.py --no-reload                  # λ¦¬λ΅λ“ λΉ„ν™μ„±ν™”

# ν™κ²½ κ²€μ¦
python run_backend.py --check                      # ν¨ν‚¤μ§€/ν™κ²½ μ²΄ν¬
```

### 9.3 Kubernetes λ°°ν¬
```bash
# K8s ν΄λ¬μ¤ν„°μ— λ°°ν¬
kubectl apply -f infrastructure/k8s/
```

### 9.4 AWS λ°°ν¬ (Terraform)
```bash
cd infrastructure/terraform
terraform init
terraform plan
terraform apply
```

---

## 10. API μ—”λ“ν¬μΈνΈ

### 10.1 ν•µμ‹¬ API

| λ©”μ„λ“  | μ—”λ“ν¬μΈνΈ              | κΈ°λ¥               | νλΌλ―Έν„°                    |
| ---- | ------------------ | ---------------- | ----------------------- |
| GET  | `/`                | μ›Ή λ€μ‹λ³΄λ“          | -                       |
| POST | `/api/v1/query/`   | μ§μ μ²λ¦¬            | question, session_id, use_advanced_reasoning |
| POST | `/api/v1/upload-document/` | λ¬Έμ„ μ—…λ΅λ“          | file (multipart)        |
| POST | `/api/v1/add-url/` | URL μ½ν…μΈ  μ¶”κ°€       | url (JSON body)         |
| GET  | `/health/`         | ν—¬μ¤μ²΄ν¬            | -                       |
| GET  | `/docs/`           | API λ¬Έμ„ (Swagger) | -                       |

### 10.2 μ„Έμ… κ΄€λ¦¬ API

| λ©”μ„λ“    | μ—”λ“ν¬μΈνΈ                     | κΈ°λ¥        | νλΌλ―Έν„°      |
| ------ | ------------------------- | --------- | --------- |
| GET    | `/api/v1/sessions/`       | μ„Έμ… λ©λ΅ μ΅°ν  | -         |
| GET    | `/api/v1/sessions/{id}`   | μ„Έμ… μ •λ³΄ μ΅°ν  | session_id |
| DELETE | `/api/v1/sessions/{id}`   | μ„Έμ… μ‚­μ      | session_id |

### 10.3 μ§€μ‹λ² μ΄μ¤ κ΄€λ¦¬ API

| λ©”μ„λ“ | μ—”λ“ν¬μΈνΈ                        | κΈ°λ¥           | νλΌλ―Έν„° |
| --- | ---------------------------- | ------------ | ---- |
| GET | `/api/v1/knowledge-base/stats` | μ§€μ‹λ² μ΄μ¤ ν†µκ³„ μ΅°ν | -    |

---

## 11. λΉ„κΈ°λ¥ μ”κµ¬μ‚¬ν•­

| ν•­λ©                | λ©ν‘                                     | ν„μ¬ κµ¬ν„ μƒνƒ         |
| ----------------- | -------------------------------------- | --------------- |
| **Latency**       | μΏΌλ¦¬ p95 < 2s                           | β… μ¤νΈλ¦¬λ° μ‘λ‹µ μ§€μ›    |
| **Availability**  | 99.9% (μ›” Downtime < 45min)           | β… K8s ν—¬μ¤μ²΄ν¬ κµ¬ν„   |
| **Scalability**   | 10λ§ λ¬Έμ„, λ™μ‹ 1000 QPS                   | β… LanceDB ν•μ΄λΈλ¦¬λ“ κ²€μƒ‰ |
| **Usability**     | 5λ¶„ λ‚΄ μ¨λ³΄λ”©, λ‹¤μ¤‘ μΈν„°νμ΄μ¤ μ§€μ›               | β… μ›Ή/CLI/AGUIApp  |
| **Reliability**   | μλ™ μ—λ¬ λ³µκµ¬, νμΌ μ •λ¦¬                      | β… ν–¥μƒλ μ—λ¬ μ²λ¦¬     |
| **Observability** | κµ¬μ΅°ν™”λ λ΅κΉ…, μƒμ„Έν• μ¶”λ΅  κ³Όμ • μ¶”μ                | β… λ΅κΉ… μ‹μ¤ν… κµ¬ν„     |
| **Security**      | JWT + TLS 1.3, OWASP Topβ€‘10 λ€μ‘         | π”„ κ°λ° μμ •         |
| **Monitoring**    | Prometheus + Grafana, OpenTelemetry μ¶”μ  | π”„ κ°λ° μμ •         |
| **Multi-LLM**     | 6κ° ν”„λ΅λ°”μ΄λ” μ§€μ›, λ™μ  μ „ν™                    | β… μ™„λ£            |

---

## 12. κ°λ° λ° μ΄μ

### 12.1 ν™κ²½ μ„¤μ •
```bash
# 1. ν™κ²½ λ³€μ μ„¤μ •
cp config.env.example .env
# ν•„μ”ν• API ν‚¤μ™€ μ„¤μ • μ…λ ¥

# 2. κ°λ° ν™κ²½ μ΄κΈ°ν™”
./init-cursor.sh

# 3. μμ΅΄μ„± μ„¤μΉ
pip install -r backend/requirements.txt
pip install -r ui/requirements.txt

# 4. ν™κ²½ κ²€μ¦
python run_backend.py --check
```

### 12.2 ν…μ¤νΈ μ‹¤ν–‰
```bash
# λ°±μ—”λ“ ν…μ¤νΈ
cd tests && python -m pytest backend/

# UI ν…μ¤νΈ  
cd tests && python -m pytest ui/
```

### 12.3 κ°λ° μ›ν¬ν”λ΅
```bash
# 1. λ°±μ—”λ“ κ°λ°
python run_backend.py                    # μ„λ²„ λ¨λ“
python run_backend.py --cli              # CLI ν…μ¤νΈ

# 2. ν”„λ΅ νΈμ—”λ“ κ°λ°
python run_ui.py                         # AGUIApp UI

# 3. ν†µν•© ν…μ¤νΈ
docker-compose up --build               # μ „μ²΄ μ‹μ¤ν…
```

### 12.4 CI/CD νμ΄ν”„λΌμΈ
- **CI**: GitHub Actionsλ΅ lint β†’ test β†’ build
- **CD**: μ»¨ν…μ΄λ„ μ΄λ―Έμ§€ λΉλ“ β†’ λ μ§€μ¤νΈλ¦¬ ν‘Έμ‹ β†’ K8s λ°°ν¬

---

## 13. λ΅λ“λ§µ

### Phase 1: ν•µμ‹¬ κΈ°λ¥ (μ™„λ£) β…
- [x] λ‹¤μ¤‘ LLM ν”„λ΅λ°”μ΄λ” μ§€μ›
- [x] RAG μ—μ΄μ „νΈ μ‹μ¤ν…
- [x] λ¬Έμ„ μ²λ¦¬ νμ΄ν”„λΌμΈ
- [x] μ΄μ¤‘ UI (AGUIApp + μ›Ή λ€μ‹λ³΄λ“)
- [x] CLI μΈν„°νμ΄μ¤
- [x] μ„Έμ… κ΄€λ¦¬ μ‹μ¤ν…
- [x] ν–¥μƒλ μ—λ¬ μ²λ¦¬
- [x] λ΅κΉ… μ‹μ¤ν…
- [x] Docker μ»¨ν…μ΄λ„ν™”
- [x] Kubernetes λ°°ν¬

### Phase 2: λ³΄μ• λ° λ¨λ‹ν„°λ§ (μ§„ν–‰ μ¤‘) π”„
- [ ] JWT μΈμ¦ μ‹μ¤ν…
- [ ] Prometheus λ©”νΈλ¦­
- [ ] Grafana λ€μ‹λ³΄λ“
- [ ] OpenTelemetry μ¶”μ 
- [ ] μ‚¬μ©μ κ¶ν• κ΄€λ¦¬

### Phase 3: κ³ κΈ‰ κΈ°λ¥ (κ³„ν) π“‹
- [ ] λ©€ν‹°λ¨λ‹¬ λ¬Έμ„ μ²λ¦¬ (μ΄λ―Έμ§€, ν‘)
- [ ] μ‹¤μ‹κ°„ ν‘μ—… κΈ°λ¥
- [ ] κ³ κΈ‰ RAG κΈ°λ²• (HyDE, RAG-Fusion)
- [ ] λ²΅ν„° DB ν΄λ¬μ¤ν„°λ§
- [ ] μ¤νΈλ¦¬λ° μ‘λ‹µ μµμ ν™”

### Phase 4: μ—”ν„°ν”„λΌμ΄μ¦ κΈ°λ¥ (κ³„ν) πΆ
- [ ] RBAC κ¶ν• κ΄€λ¦¬
- [ ] κ°μ‚¬ λ΅κ·Έ
- [ ] λ°±μ—…/λ³µκµ¬ μ‹μ¤ν…
- [ ] λ©€ν‹° ν…λ„νΈ μ§€μ›
- [ ] κ³ κΈ‰ λ¶„μ„ λ€μ‹λ³΄λ“

---

## 14. μ„±κ³µ μ§€ν‘

| μ§€ν‘              | λ©ν‘     | μΈ΅μ • λ°©λ²•              |
| --------------- | ------ | ------------------ |
| **λ‹µλ³€ μ •ν™•λ„**      | > 90%  | μ‚¬λ‚΄ ν…μ¤νΈ λ°μ΄ν„°μ…‹ κΈ°μ¤€     |
| **μ‘λ‹µ μ‹κ°„**       | < 2s   | p95 λ μ΄ν„΄μ‹            |
| **μ‹μ¤ν… κ°€μ©μ„±**     | > 99.9% | μ—…νƒ€μ„ λ¨λ‹ν„°λ§           |
| **λ™μ‹ μ‚¬μ©μ**      | 1000+  | λ¶€ν• ν…μ¤νΈ             |
| **λ¬Έμ„ μ²λ¦¬λ‰**      | 10λ§+   | λ²΅ν„° DB μ©λ‰ λ° κ²€μƒ‰ μ„±λ¥   |
| **LLM ν”„λ΅λ°”μ΄λ” μ „ν™** | < 1λ¶„   | ν™κ²½ λ³€μ λ³€κ²½ ν›„ μ¬μ‹μ‘ μ‹κ°„ |
| **μ‚¬μ©μ λ§μ΅±λ„**     | > 4.5/5 | μΈν„°νμ΄μ¤λ³„ μ‚¬μ©μ„± ν‰κ°€     |
| **κ°λ°μ κ²½ν—**      | < 5λ¶„   | μ„¤μΉλ¶€ν„° μ²« μΏΌλ¦¬κΉμ§€ μ†μ”μ‹κ°„  |

---

## 15. μ¤ν” μ΄μ λ° ν•΄κ²° λ°©μ•

### 15.1 ν•΄κ²°λ μ΄μ β…
- ~~GPTβ€‘4o API μΏΌν„° μ ν•~~ β†’ **λ‹¤μ¤‘ LLM ν”„λ΅λ°”μ΄λ” μ§€μ›μΌλ΅ ν•΄κ²°**
- ~~ν”„λ΅ νΈμ—”λ“ λ³µμ΅μ„±~~ β†’ **μ΄μ¤‘ UIλ΅ μ‚¬μ©μλ³„ μµμ ν™”**
- ~~λ°°ν¬ λ³µμ΅μ„±~~ β†’ **Docker + K8s ν‘μ¤€ν™”**
- ~~κ°λ°μ κ²½ν— λ¶€μ΅±~~ β†’ **CLI μΈν„°νμ΄μ¤ μ¶”κ°€**
- ~~μ—λ¬ μ²λ¦¬ λ―Έν΅~~ β†’ **κµ¬μ΅°ν™”λ μμ™Έ μ²λ¦¬ κµ¬ν„**
- ~~μ„Έμ… κ΄€λ¦¬ λ¶€μ΅±~~ β†’ **μ™„μ „ν• μ„Έμ… CRUD API κµ¬ν„**

### 15.2 μ§„ν–‰ μ¤‘μΈ μ΄μ π”„
1. **μΈμ¦ μ‹μ¤ν…**: JWT κΈ°λ° μΈμ¦ κµ¬ν„ μ¤‘
2. **λ¨λ‹ν„°λ§**: Prometheus/Grafana ν†µν•© μ‘μ—… μ¤‘
3. **μ„±λ¥ μµμ ν™”**: λ€μ©λ‰ λ¬Έμ„ μ²λ¦¬ μµμ ν™”
4. **μ¤νΈλ¦¬λ° κ°μ„ **: μ‹¤μ‹κ°„ μ‘λ‹µ μ„±λ¥ ν–¥μƒ

### 15.3 ν–¥ν›„ κ²€ν†  μ΄μ π“‹
1. **Robots.txt μ¤€μ**: URL ν¬λ΅¤λ§ μ‹ μ •μ±… μλ¦½ ν•„μ”
2. **S3 λ€μ•**: μ¨β€‘ν”„λ λ―Έμ¤ κ°μ²΄ μ¤ν† λ¦¬μ§€ μµμ… κ²€ν† 
3. **λ²΅ν„° DB λ°±μ—…**: LanceDB λ°±μ—…/λ³µκµ¬ μ „λµ μλ¦½
4. **λ©€ν‹°ν…λ„μ‹**: κΈ°μ—… κ³ κ°λ³„ λ°μ΄ν„° κ²©λ¦¬ λ°©μ•
5. **κµ­μ ν™”**: λ‹¤κµ­μ–΄ μ§€μ› λ° ν„μ§€ν™”

---

## 16. μ‚¬μ© μ‹λ‚λ¦¬μ¤

### 16.1 μΌλ° μ‚¬μ©μ (μ›Ή λ€μ‹λ³΄λ“)
1. `http://localhost:8000` μ ‘μ†
2. λ¬Έμ„ μ—…λ΅λ“ λλ” URL μ¶”κ°€
3. μ§λ¬Έ μ…λ ¥ λ° κ³ κΈ‰ μ¶”λ΅  μµμ… μ„ νƒ
4. μ‹¤μ‹κ°„ μ‘λ‹µ λ° μ†μ¤ ν™•μΈ

### 16.2 κ°λ°μ (CLI)
1. `python run_backend.py --cli` μ‹¤ν–‰
2. `/info`λ΅ μ‹μ¤ν… μƒνƒ ν™•μΈ
3. `/url <URL>`λ΅ μ½ν…μΈ  μ¶”κ°€
4. `/reasoning`μΌλ΅ μ¶”λ΅  λ¨λ“ μ „ν™
5. μ§λ¬Έ μ…λ ¥ λ° μƒμ„Έ μ‘λ‹µ ν™•μΈ

### 16.3 μ‹μ¤ν… κ΄€λ¦¬μ
1. `python run_backend.py --check`λ΅ ν™κ²½ κ²€μ¦
2. `/health` μ—”λ“ν¬μΈνΈλ΅ ν—¬μ¤μ²΄ν¬
3. `/api/v1/knowledge-base/stats`λ΅ μ‹μ¤ν… ν†µκ³„ μ΅°ν
4. λ΅κ·Έ νμΌ λ¨λ‹ν„°λ§

---

**λ¬Έμ„ λ²„μ „**: v3.0  
**μµμΆ… μ—…λ°μ΄νΈ**: 2024λ…„ 12μ›”  
**λ‹΄λ‹Ήμ**: Enterprise RAG Team  
**μ£Όμ” λ³€κ²½μ‚¬ν•­**: μ›Ή λ€μ‹λ³΄λ“, CLI μΈν„°νμ΄μ¤, ν–¥μƒλ μ„Έμ… κ΄€λ¦¬, λ΅κΉ… μ‹μ¤ν… μ¶”κ°€
